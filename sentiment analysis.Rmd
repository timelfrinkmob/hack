---
title: "Sentiment Analysis"
output: html_notebook
---

What we get is a list of n articles with at least one of them as the one we want to label.
With this layer we want verify if those articles contain the same subject and content.
This way we can generate more labels if they are the same and filter articles out.


Dataset:
  Position:
  Source google/bing:
  Date of pub:
  Link:
  Title:
  Content:
  Labeled:


Problems to tackle: 
- No labels (only the original one)
- Different formats ?

First approach rule based.
- Accuracy with original content
- Accuracy with original title
- Same sentiment as original

Repeat those steps with the stemming, tokenized, remove stop words of dataset.

Find a cutoff.

```{r Explore the data}
library(tm)
library(dplyr)
docs <- c("BLACK LIVES MATTER LEADER DERAY MCKESSON ENDORSES CLINTON",
          "Black Lives Matter leader DeRay McKesson endorses Clinton",
          "Black Lives Matter activist DeRay Mckesson endorses Hillary Clinton",
          "Black Lives Matter activist DeRay Mckesson endorses Hillary Clinton",
          "Black Lives Matter activist Mckesson endorses Clinton",
          "Black Lives Matter’s DeRay Mckesson endorses Hillary Clinton",
          "Black Lives Matter activist Deray Mckesson endorses Clinton",
          "Black Lives Matter Activist DeRay McKesson is Voting for Hillary",
          "DERAY MCKESSON",
          "‘What Happened to Black Lives Matter?’ - Movement For Black Lives Responds")

article6 <- "Why Did Attorney General Loretta Lynch Plead The Fifth? Barracuda Brigade 2016-10-28 Print The administration is blocking congressional probe into cash payments to Iran. Of course she needs to plead the 5th. She either can\342\200\231t recall, refuses to answer, or just plain deflects the question. Straight up corruption at its finest! \n100percentfedUp.com ; Talk about covering your ass! Loretta Lynch did just that when she plead the Fifth to avoid incriminating herself over payments to Iran\342\200\246Corrupt to the core! Attorney General Loretta Lynch is declining to comply with an investigation by leading members of Congress about the Obama administration\342\200\231s secret efforts to send Iran $1.7 billion in cash earlier this year, prompting accusations that Lynch has \342\200\234pleaded the Fifth\342\200\235 Amendment to avoid incriminating herself over these payments, according to lawmakers and communications exclusively obtained by the Washington Free Beacon. \nSen. Marco Rubio (R., Fla.) and Rep. Mike Pompeo (R., Kan.) initially presented Lynch in October with a series of questions about how the cash payment to Iran was approved and delivered. \nIn an Oct. 24 response, Assistant Attorney General Peter Kadzik responded on Lynch\342\200\231s behalf, refusing to answer the questions and informing the lawmakers that they are barred from publicly disclosing any details about the cash payment, which was bound up in a ransom deal aimed at freeing several American hostages from Iran. \nThe response from the attorney general\342\200\231s office is \342\200\234unacceptable\342\200\235 and provides evidence that Lynch has chosen to \342\200\234essentially plead the fifth and refuse to respond to inquiries regarding [her]role in providing cash to the world\342\200\231s foremost state sponsor of terrorism,\342\200\235 Rubio and Pompeo wrote on Friday in a follow-up letter to Lynch. More Related	"

article7 <- "An article was published Wednesday that questioned the organization, the leadership, the purpose, the plans and the goals of Black Lives Matter. It was an article that organizers in the Movement for Black Lives say included multiple inaccuracies, and as the group seeks corrections or a retraction, they responded with an op-ed of their own to set the record straight. In “What Happened to Black Lives Matter?”, BuzzFeed reporter Darren Sands said that in the wake of Donald Trump’s election in November 2016, while the nation had the biggest outpouring of liberal activism in more than a decade, Black Lives Matter seems less visible than it was a year ago, and the movement is struggling with disputes over direction and leadership. Sands spoke with members of groups that are part of Black Lives Matter and spoke of the history of the movement, the origins of its ideals, the people who are said to have started it, and those who are perceived to lead it. There are also hints of infighting, people disillusioned with the movement and where it is headed, and questions about how it will be sustained and continued. Organizers within the Movement for Black Lives took issue with that portrayal and wrote their own op-ed on Mic addressing the things said in Sands’ article. “These are dangerous times for our people,” they wrote. “History tells us that we need responsible, thoughtful and brave journalism. But movements can be stopped in their tracks by uninformed and inaccurate hit pieces that trade in gossip. We must consider what we believe in, who we stand with, and what we are fighting for.” It’s worth reading both pieces to consider the differing opinions surrounding the movement. Those who spoke on the record with Sands echoed some of his assertions, the same assertions that Movement for Black Lives seeks to clarify. One point that Movement for Black Lives makes clear is that just like in previous movements, there is going to be conflict; everyone is not going to agree on every point or every approach, but it’s the way that conflict is handled that will dictate how far the movement can go. “We are not always in full agreement, we have competing ideas and we will undoubtedly upset each other in the process of making difficult decisions. We are here because we believe that our victories in service of black people are bigger and better when we win together.” And then: “And when we arrive at conflict, we do our best to hold each other to that standard, no matter how difficult or inconvenient. We don’t always get this right, but in order to do so, it requires all of us to hold these values.”"


docs <- c(article1,article2,article3,article4,article5,article6,article7)

docs <- VCorpus(VectorSource(docs))
docs <- tm_map(docs, content_transformer(tolower))
docs <- tm_map(docs,removePunctuation)
docs <- tm_map(docs, stemDocument)
docs <- tm_map(docs, removeWords, stopwords("english"))
dtm <-  DocumentTermMatrix(docs)
library(tidytext)
tidy_dtm <- tidy(dtm)
tidy_dtm$document <- as.numeric(as.character(tidy_dtm$document))

tidy_dtm <- tidyr::spread(tidy_dtm,document,count)
tidy_dtm[is.na(tidy_dtm)] <- 0

ncol(tidy_dtm)

library(lsa)
require(quanteda)
cosine = c()
cor = c()
for(i in c(1:(ncol(tidy_dtm)-1))) {
cosine <- c(cosine,(lsa::cosine(as.vector(t(tidy_dtm[,2])),as.vector(t(tidy_dtm[,1+i])))))
cor <- c(cor,(cor(as.vector(t(tidy_dtm[,2])),as.vector(t(tidy_dtm[,1+i])))))
}

tot <- cbind(cosine,cor)
tot

```


